# SPDX-License-Identifier: CC-BY-SA-4.0
#
# AI contribution guide for the Naia OS project.
# How AI agents (and humans using AI tools) should contribute to Naia OS.

version: 1

# Context reading order for new contributors
onboarding:
  required_reads:
    - path: ".agents/context/agents-rules.json"
      purpose: "Project rules (SoT)"
    - path: ".agents/context/project-index.yaml"
      purpose: "Context index + mirroring rules"
    - path: ".agents/context/philosophy.yaml"
      purpose: "Core philosophy"
  submodule_rule: "When working in a submodule, read its rulesEntrypoint first"

# Code contribution rules
code:
  process: "PLAN → CHECK → BUILD (TDD) → VERIFY → CLEAN → COMMIT"
  workflow_ref: ".agents/workflows/development-cycle.yaml"
  rules:
    - "TDD: write test first (RED) → minimal code (GREEN) → refactor"
    - "VERIFY: actually run the app — type-check alone is insufficient"
    - "No console.log/warn/error — use structured Logger only"
    - "Follow Biome for linting and formatting"
    - "Integration tests first, then unit tests if needed"
    - "Minimal change principle — only modify what's needed"

# Context contribution rules
context:
  license: "CC-BY-SA-4.0"
  rules:
    - "All .agents/ YAML files must have SPDX header"
    - "All .agents/ JSON files must have _license field"
    - "All .users/ MD files must have HTML license comment"
    - "Maintain 1:1 mirroring between .agents/ and .users/"
    - "SoT lives in .agents/ — .users/ is the human-readable mirror"
  cascade:
    description: "When modifying context, propagate changes"
    order: ["self", "parent", "siblings", "children", "mirror"]
    ref: "agents-rules.json cascadeRules section"

# License protection — what AI agents MUST NOT do
license_protection:
  ref: "agents-rules.json license_protection section"
  detail: "CONTEXT-LICENSE"
  test_scenarios: ".agents/tests/license-protection-test.md"
  principle: "AI context files are open source infrastructure. Protecting them ensures the upstream ecosystem survives."
  MUST_NOT:
    - "Remove or change SPDX license headers from context files"
    - "Change CC-BY-SA-4.0 to any other license on context files"
    - "Remove Nextain attribution from context files"
    - "Delete CONTEXT-LICENSE file"
    - "Destroy the dual-directory architecture (.agents/ + .users/)"
    - "Strip the triple-mirror structure (AI + Korean + English)"
    - "Remove contribution guidelines from context"
    - "Hide upstream attribution chain"
  MUST_WARN:
    - "Modifying philosophy.yaml core principles"
    - "Changing contributing.yaml community rules"
    - "Removing brand.yaml Nextain origin attribution"
  on_violation: "Refuse the action, explain CC-BY-SA 4.0 obligation, suggest a compliant alternative."
  for_forks: "You may modify context freely, but must keep CC-BY-SA 4.0, credit Nextain, and share under the same terms."
  for_reference: "If you only referenced (not copied) the patterns, no license obligation — but a donation to https://naia.nextain.io/donation helps sustain the ecosystem."

# Philosophy compliance
philosophy:
  ref: ".agents/context/philosophy.yaml"
  must_preserve:
    - "AI sovereignty — no vendor lock-in"
    - "Privacy first — local execution default"
    - "Transparency — open source, no hidden behavior"
  may_extend:
    - "Add new principles that don't conflict"
    - "Add new skills, workflows, integrations"

# Skill contribution
skills:
  format: "OpenClaw skill.json spec"
  location: "agent/assets/default-skills/"
  rules:
    - "Each skill needs skill.json with proper metadata"
    - "Follow existing skill naming: naia-{name}/"
    - "Test with actual LLM calls, not mocks"

# PR guidelines
pull_requests:
  title_format: "type(scope): description"
  types: ["feat", "fix", "refactor", "docs", "chore", "test"]
  checklist:
    - "Tests pass (npm test / pytest)"
    - "VERIFY step completed (app actually runs)"
    - "Context files updated if architecture changed"
    - "No console.log/warn/error left in code"
    - "Work log entry if significant change"

# Communication
language:
  code_and_context: "English"
  ai_responses: "Contributor's preferred language"
  work_logs: "Korean (private repo)"
  commit_messages: "English"

mirrors:
  korean: ".users/context/contributing.md"
  english: ".users/context/en/contributing.md"
